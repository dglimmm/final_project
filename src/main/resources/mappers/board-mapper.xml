<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">
	<resultMap type="Board" id="boardResult">
		<result column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="BOARD_CONTENT" property="boardContent"/>
		<result column="BOARD_CREATE_DATE" property="boardCreateDate"/>
		<result column="BOARD_MODIFY_DATE" property="boardModifyDate"/>
		<result column="BOARD_REPORT" property="boardReport"/>
		<result column="BOARD_WRITER" property="boardWriter"/>
		<result column="BOARD_TRIP_PLAN_NO" property="boardTripPlanNo"/>
		<result column="BOARD_CATEGORY" property="boardCategory"/>
		<result column="ATTACHMENT_CHANGE_NAME" property="attachement"/>
		<result column="TRIP_START_DATE" property="tripStartDate"/>
		<result column="TRIP_END_DATE" property="tripEndDate"/>
	</resultMap>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<!-- 같이가요 게시글의 총 갯수 조회하는 쿼리문 -->
	<select id="selectTogetherListCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
		WHERE BOARD_CATEGORY = 2
	</select>
	
	<!-- 같이가요 게시글 조회 쿼리문 -->
	<select id="selectTogetherList" resultMap="boardResult">
		select  BOARD_NO
		        ,BOARD_CONTENT
		        ,MEMBER_ID
		        ,BOARD_CREATE_DATE
		        ,ATTACHMENT_CHANGE_NAME
		from board
		join member on (BOARD_WRITER = MEMBER_NO)
		join ATTACHMENT on (ATTACHMENT_BOARD_NO = BOARD_NO)
		where ATTACHMENT_IMG_LEVEL = 1
		and BOARD_CATEGORY = 2
		ORDER BY BOARD_CREATE_DATE DESC
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<!-- 마이페이지 같이가요 게시글의 총 갯수 조회하는 쿼리문 -->
	<select id="myTogetherListCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
		JOIN MEMBER ON (MEMBER_NO = BOARD_WRITER)
		JOIN TRIP_PLAN ON (TRIP_PLAN_NO = BOARD_TRIP_PLAN_NO)
		WHERE BOARD_CATEGORY = 2
			AND BOARD_WRITER = #{memberNo}
	</select>
	
	<!-- 마이페이지 같이가요 게시글 조회 쿼리문 -->
	<select id="myTogetherList" resultMap="boardResult">
		select  BOARD_NO
				,BOARD_TITLE
		        ,BOARD_CONTENT
		        ,BOARD_WRITER
		        ,BOARD_MODIFY_DATE      
		        ,TRIP_START_DATE
		        ,TRIP_END_DATE
		from board
		join member on (BOARD_WRITER = MEMBER_NO)
		JOIN TRIP_PLAN ON(BOARD_TRIP_PLAN_NO = TRIP_PLAN_NO)
		where BOARD_CATEGORY = 2
			AND BOARD_WRITER = #{memberNo}
		ORDER BY BOARD_NO DESC

	</select>
	
	
	
	
	<!-- 마이페이지 후기 게시글의 총 갯수 조회하는 쿼리문 -->
	<select id="myReviewListCount" resultType="_int">
		SELECT COUNT(*)
		FROM BOARD
		JOIN MEMBER ON (MEMBER_NO = BOARD_WRITER)
		JOIN TRIP_PLAN ON (TRIP_PLAN_NO = BOARD_TRIP_PLAN_NO)
		WHERE BOARD_CATEGORY = 1
			AND BOARD_WRITER = #{memberNo}
	</select>
	
	<!-- 마이페이지 후기 게시글 조회 쿼리문 -->
	<select id="myReviewList" resultMap="boardResult">
		select  BOARD_NO
				,BOARD_TITLE
		        ,BOARD_CONTENT
		        ,BOARD_WRITER
		        ,BOARD_MODIFY_DATE       
		        ,TRIP_START_DATE
		        ,TRIP_END_DATE
		from board
		join member on (BOARD_WRITER = MEMBER_NO)
		JOIN TRIP_PLAN ON(BOARD_TRIP_PLAN_NO = TRIP_PLAN_NO)
		where BOARD_CATEGORY = 1
			AND BOARD_WRITER = #{memberNo}
		ORDER BY BOARD_NO DESC

	</select>
	
	
</mapper>
